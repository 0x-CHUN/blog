 

# 数据库设计和E-R模型

## 设计过程概述

### 设计阶段

* 数据库的用户需求
* 选择数据模型
* 完善概念模型
* 从抽象数据模型到数据库实现
  * 逻辑设计阶段：将高层概念模型是映射到数据库系统的实现数据模型
  * 物理设计阶段：指明数据库的物理特征，如文件的组织格式和索引结构

## 实体-联系模型

实体-联系模型（entity-relationship，E-R）

### 实体集

实体：现实世界中可区别于所有其他对象的一个“事物”或“对象”。

实体集：相同类型的实体的集合。

### 联系集

联系：多个实体之间的相互关联。

 联系集：相同类型联系的集合。

实体集之间的关联称为参与；E-R模型中一个联系实例表示在所建模的现实世界中命名实体的一个关联；

实体在联系中扮演的功能称为实体的**角色（role）**；

联系也可以具有描述性属性；

### 属性

每个属性都有一个可取值的集合，称为该属性的域（domain）；

实体集的属性是将实体集映射到域的函数；

E-R模型的属性分类：

* 简单（simple）和复合（composite）属性
* 单值和多值属性
* 派生属性：该类的值可以从别的相关属性或实体派生出来。

## 约束

### 映射基数

映射基数：表示一个实体通过一个联系集能关联的实体的个数；

对于实体集A和B之间的二元联系集R来说，映射基数的情况：

* 一对一
* 一对多
* 多对一
* 多对多

### 参与约束

实体集E中的每个实体都参与到联系集R的至少一个联系中，实体集E在联系集R中的参与称为全部的；

实体集E中的每个实体只有参与到联系集R的联系中，实体集E在联系集R中的参与称为部分的；

### 码

设R是一个涉及实体集$E_1, E_2, E_3,...,E_n$的联系集，设主码（$ E_i $)代表构成实体集$E_i$的主码的属性集合。假设所有主码的属性名是互不相同的。联系集主码的构成依赖于同联系集R相关联的属性集合；

如果联系集合R没有属性值相关联，那么属性集合
$$
primary-key(E_1) \cup primary-key(E_2) \cup ...\cup primary-key(E_n)
$$
描述了集合R中的一个联系；

如果联系集R有属性$a_1, a_2, a_3,..., a_n$与之联系，那么属性集合
$$
primary-key(E_1) \cup primary-key(E_2) \cup ...\cup primary-key(E_n) \cup |a_1, a_2, a_3,..., a_n|
$$
构成了联系集的一个超码；

